{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport createDataContext from \"./createDataContext\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport trackApi from \"../Api/api\";\n\nvar authReducer = function authReducer(state, action) {\n  console.log('state test: ', state);\n\n  switch (action.type) {\n    case \"signInError\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        singInError: action.error\n      });\n\n    case \"singUpError\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        singUpError: action.error\n      });\n\n    case \"signInSuccess\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        signInSuccess: action.token\n      });\n\n    case \"clearErrorMessage\":\n      return _objectSpread(_objectSpread({}, state), {}, {\n        singUpError: \"\",\n        singInError: \"\"\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar signUp = function signUp(dispatch) {\n  return function _callee(payload) {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            try {\n              trackApi.post(\"/signup\", payload, {}).then(function (response) {\n                AsyncStorage.setItem(\"token\", response.data.token);\n                dispatch({\n                  type: \"singUpSuccess\",\n                  token: response.data.token\n                });\n              }).catch(function (error) {\n                dispatch({\n                  type: \"singUpError\",\n                  error: error.response.data.message\n                });\n              });\n            } catch (err) {}\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar signIn = function signIn(dispatch) {\n  return function _callee2(payload, callback) {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            try {\n              trackApi.post(\"/signin\", payload, {}).then(function (response) {\n                AsyncStorage.setItem(\"token\", response.data.token);\n                dispatch({\n                  type: \"signInSuccess\",\n                  token: response.data.token\n                });\n                callback();\n              }).catch(function (error) {\n                dispatch({\n                  type: \"signInError\",\n                  error: error.response.data.message\n                });\n              });\n            } catch (err) {}\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\n\nvar clearErrorMessage = function clearErrorMessage(dispatch) {\n  dispatch({\n    type: \"clearErrorMessage\"\n  });\n};\n\nvar _createDataContext = createDataContext(authReducer, {\n  signUp: signUp,\n  signIn: signIn\n}, {\n  isSingedIn: false\n}),\n    Context = _createDataContext.Context,\n    Provider = _createDataContext.Provider;\n\nexport { Context, Provider };","map":{"version":3,"sources":["/home/mrbug/projects/mobile/tracks/src/context/AuthContext.js"],"names":["createDataContext","AsyncStorage","trackApi","authReducer","state","action","console","log","type","singInError","error","singUpError","signInSuccess","token","signUp","dispatch","payload","post","then","response","setItem","data","catch","message","err","signIn","callback","clearErrorMessage","isSingedIn","Context","Provider"],"mappings":"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","sourcesContent":["import createDataContext from \"./createDataContext\"\nimport AsyncStorage from \"@react-native-community/async-storage\"\nimport trackApi from \"../Api/api\"\nconst authReducer = (state, action) => {\n\tconsole.log('state test: ', state);\n\tswitch (action.type) {\n\t\tcase \"signInError\":\n\t\t\treturn { ...state, singInError: action.error }\n\t\tcase \"singUpError\":\n\t\t\treturn { ...state, singUpError: action.error }\n\t\tcase \"signInSuccess\":\n\t\t\treturn { ...state, signInSuccess: action.token }\n\t\tcase \"clearErrorMessage\":\n\t\t\treturn {...state,singUpError:\"\",singInError:\"\"}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n\n}\n\n\nconst signUp = dispatch => async (payload) => {\n\ttry {\n\t\ttrackApi.post(\"/signup\", payload, {}).then((response) => {\n\n\t\t\tAsyncStorage.setItem(\"token\", response.data.token)\n\t\t\tdispatch({ type: \"singUpSuccess\", token: response.data.token })\n\n\t\t}).catch((error) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"singUpError\",\n\t\t\t\terror: error.response.data.message\n\t\t\t})\n\t\t});\n\t} catch (err) {\n\n\t}\n\n}\n\nconst signIn = (dispatch) => async (payload, callback) => {\n\ttry {\n\t\ttrackApi.post(\"/signin\", payload, {}).then((response) => {\n\n\t\t\tAsyncStorage.setItem(\"token\", response.data.token)\n\t\t\tdispatch({ type: \"signInSuccess\", token: response.data.token })\n\t\t\tcallback();\n\t\t}).catch((error) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"signInError\",\n\t\t\t\terror: error.response.data.message\n\t\t\t})\n\t\t});\n\t} catch (err) {\n\n\t}\n\n}\nconst clearErrorMessage = (dispatch) => {\n\tdispatch({ type: \"clearErrorMessage\"})\n\n}\n\nexport const { Context, Provider } = createDataContext(authReducer, { signUp, signIn }, { isSingedIn: false })\n\n\n"]},"metadata":{},"sourceType":"module"}